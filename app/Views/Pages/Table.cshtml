@model app.Controllers.TableViewModel
@{
    ViewData["Title"] = "Table view";
}
<style>
    td {
        vertical-align: top;
    }
</style>


<div class="text-center">
    <h1 class="display-4">Table View/Edit</h1>
</div>

@Model.tableCode


<div ng-app="tableEditor">
    <div ng-controller="dml as dml" ng-init="dml.InitTableCode('@Model.tableCode')">

        <table>
            <tr>
                <td style="vertical-align: top">
                   <ul>
                        <li>
                            <input type="checkbox" ng-model="dml.show['_id']">ID
                        </li>
                        
                        @foreach (var fld in Model.table.fields)
                        {
                            <li>
                                <input type="checkbox" ng-model="dml.show['@fld.name']" ng-change="dml.LoadRows()">
                                @(fld.alias ?? fld.name)
                            </li>
                        }

                    </ul>
                    
                </td>
                <td>
                    Search: <input name="tableSearch" type="text" ng-model="dml.searchString"
                        ng-model-options='{ debounce: 1000 }'>
                        <partial name="Table/dataTable.cshtml" />
                </td>
            </tr>
        </table>

    </div>
</div>


@section Scripts
{
<script src="@Url.Content("~/js/main.js")"></script>
<script src="@Url.Content("~/js/ctrlTableView.js")"></script>
}